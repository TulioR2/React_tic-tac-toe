<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React - Jogo da Velha com Placar</title>

    <!-- React 17 -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        background: #f5f6fa;
        margin: 0;
        padding: 0;

        /* Centraliza tudo na tela */
        display: flex;
        justify-content: center;
        align-items: center;

        height: 100vh;
      }

      .game-container {
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
        width: 380px;

        /* animação suave */
        animation: fadeIn 0.4s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .title {
        text-align: center;
        font-size: 26px;
        font-weight: bold;
        margin-bottom: 15px;
      }

      .board-row {
        display: flex;
      }

      .square {
            width: 80px;
            height: 80px;
            background: #fff;
            border: 2px solid #444;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: background 0.2s;
        }

      .square:hover {
        background: #f0f0f0;
      }

      .status {
        margin-bottom: 15px;
        font-size: 18px;
        text-align: center;
      }

      .placar {
        display: flex;
        justify-content: space-around;
        margin-bottom: 20px;
        background: #2c3e50;
        padding: 12px;
        border-radius: 8px;
        color: white;
        font-size: 18px;
      }

      .buttons {
        margin-top: 20px;
        display: flex;
        justify-content: center;
      }

      .btn {
        padding: 10px 20px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        transition: 0.2s;
      }

      .btn:hover {
        background: #2980b9;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script type="text/babel">
      /* QUADRADO */
      function Square({ value, onSquareClick }) {
        return (
          <button className="square" onClick={onSquareClick}>
            {value}
          </button>
        );
      }

      /* TABULEIRO */
      function Board({ xIsNext, squares, onPlay }) {
        function handleClick(i) {
          if (squares[i] || calculateWinner(squares)) return;

          const nextSquares = squares.slice();
          nextSquares[i] = xIsNext ? "X" : "O";
          onPlay(nextSquares);
        }

        const winner = calculateWinner(squares);
        let status = winner
          ? "Vencedor: " + winner
          : "Próximo jogador: " + (xIsNext ? "X" : "O");

        return (
          <>
            <div className="status">{status}</div>

            <div className="board-row">
              <Square value={squares[0]} onSquareClick={() => handleClick(0)} />
              <Square value={squares[1]} onSquareClick={() => handleClick(1)} />
              <Square value={squares[2]} onSquareClick={() => handleClick(2)} />
            </div>

            <div className="board-row">
              <Square value={squares[3]} onSquareClick={() => handleClick(3)} />
              <Square value={squares[4]} onSquareClick={() => handleClick(4)} />
              <Square value={squares[5]} onSquareClick={() => handleClick(5)} />
            </div>

            <div className="board-row">
              <Square value={squares[6]} onSquareClick={() => handleClick(6)} />
              <Square value={squares[7]} onSquareClick={() => handleClick(7)} />
              <Square value={squares[8]} onSquareClick={() => handleClick(8)} />
            </div>
          </>
        );
      }

      /* JOGO */
      function Game() {
        const [history, setHistory] = React.useState([Array(9).fill(null)]);
        const [currentMove, setCurrentMove] = React.useState(0);

        /* placar */
        const [placar, setPlacar] = React.useState({ X: 0, O: 0 });

        const xIsNext = currentMove % 2 === 0;
        const currentSquares = history[currentMove];

        function handlePlay(nextSquares) {
          const nextHistory = [
            ...history.slice(0, currentMove + 1),
            nextSquares,
          ];

          setHistory(nextHistory);
          setCurrentMove(nextHistory.length - 1);

          const winner = calculateWinner(nextSquares);
          if (winner) {
            setPlacar((p) => ({ ...p, [winner]: p[winner] + 1 }));
          }
        }

        function reiniciarPartida() {
          setHistory([Array(9).fill(null)]);
          setCurrentMove(0);
        }

        return (
          <div className="game-container">
            <div className="title">Jogo da Velha</div>

            <div className="placar">
              <div>X: {placar.X}</div>
              <div>O: {placar.O}</div>
            </div>

            <Board
              xIsNext={xIsNext}
              squares={currentSquares}
              onPlay={handlePlay}
            />

            <div className="buttons">
              <button className="btn" onClick={reiniciarPartida}>
                Reiniciar Partida
              </button>
            </div>
          </div>
        );
      }

      /* FUNÇÃO DE VITÓRIA */
      function calculateWinner(squares) {
        const lines = [
          [0, 1, 2],
          [3, 4, 5],
          [6, 7, 8],
          [0, 3, 6],
          [1, 4, 7],
          [2, 5, 8],
          [0, 4, 8],
          [2, 4, 6],
        ];

        for (let i = 0; i < lines.length; i++) {
          const [a, b, c] = lines[i];

          if (
            squares[a] &&
            squares[a] === squares[b] &&
            squares[a] === squares[c]
          ) {
            return squares[a];
          }
        }

        return null;
      }

      ReactDOM.render(<Game />, document.getElementById("root"));
    </script>
  </body>
</html>
s